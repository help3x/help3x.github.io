---
title: '部屋移動時間の計算'
---



## 概要

労働生産性において、部屋移動時間の計算に労働時間計算の概念を取り入れる。

オペレータの勤務日と勤務班からタイムテーブルを判別し、入室／退室時刻の範囲内で移動した時間を計算する。
その他労働時間（所定内でも所定外でもない時間帯）においては、生産外作業（その他）に計上する。



## NOTE: 打刻日時から勤務日を決める

入室日時の時刻から勤務日を決める。

「入室時刻 ＜ 4時45分00秒」であれば、入室日時の前日。  
そうでなければ、入室日時の当日。

勤務日に時刻はいらないため、0時00分00秒とする。

たとえば、入室日時が3月27日6時35分であれば、勤務日は3月27日。  
入室日時が3月28日2時15分であれば、勤務日は3月27日。



## 移動の種類

1. フリー応援

    ＯＰ配置モニタでオペレータをドラッグ&ドロップする。

2. 生産応援

    ＯＰ配置モニタでオペレータを右クリックし、「生産応援」を選ぶ。

3. 生産外作業

    ＯＰ配置モニタでオペレータを右クリックし、「生産外作業」を選ぶ。



## タイムテーブルに移動時間を割り当てる？

打刻データがリアルタイムでないため、実際の勤務状況とＯＰ配置モニタの表示にラグが生じる。

- 入室日時より前の移動データは無効とする。
- 退室日時より後の移動データは無効とする。
- ⇨ 入室日時／退室日時の範囲内で、タイムテーブルの所定内・所定外労働時間の範囲にある移動データのみ有効とする。
- 休憩時間に移動が開始されたときは、休憩時間の終了時刻を移動開始とする。
- 休憩時間に移動が終了されたときは、休憩時間の開始時刻を移動終了とする。

- 移動時間は所定内、所定外、その他で分けて計算する。
- その他労働時間は生産外作業（その他）に計上する。  

    ここが面倒。  
    「ＯＰ生産外応援データ履歴」「ＯＰ生産外区分データ履歴」にシステムからデータを追加する。  
    ＯＰ配置モニタから作られたのか、システムから作られたのか判別できるようにする。  
    でないと再計算ができなくなる。

    その他労働時間は生産外作業として計上するわけだから、
    ＯＰ配置モニタから生産外作業が登録されていても、それはいったん打ち消す。  
    ⇩  
    その他労働時間の生産外作業は、すべてシステムから登録されるものとする。

- 部屋移動開始／終了の日時の補正が必要。
- 部屋移動開始と部屋移動終了の両方が、その他労働時間の範囲にある。
    - 無効な移動データとする。移動時間は 0 。
- 部屋移動開始のみ、その他労働時間の範囲にある。
    - 例）昼勤で6時30分より前に入室したとき。6時30分まではその他労働時間となる。
    - 部屋移動開始を、その他労働時間の終了時刻から見て直近の所定内または所定外の開始時刻とする。
        - 早昼勤　6時入室。直近は7時から始まる所定内労働なので、7時を移動開始とする。
        - 遅昼勤　6時入室。直近は7時から始まる所定外労働なので、7時を移動開始とする。
- 部屋移動終了のみ、その他労働時間の範囲にある。
    - 例）昼勤で19時05分より前に移動開始して、20時に移動終了したとき。19:35～20:00 がその他労働時間となる。
    - 部屋移動終了を、その他労働時間の開始時刻から見て、直近の所定内または所定外の終了時刻とする。
        - 早昼勤　20時05分に移動終了。直近は19時05分に終わる所定外労働なので、19時05分を移動終了とする。
        - 遅昼勤　20時05分に移動終了。直近は19時05分に終わる所定内労働なので、19時05分を移動終了とする。
- 補正した結果が「部屋移動開始 ＞ 部屋移動終了」である。
    - 無効な移動データとする。移動時間は 0 （マイナスにはしない）。





